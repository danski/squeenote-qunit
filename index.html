<!DOCTYPE html>
<html lang="en">
<head>
	<title>Squeenote</title>

  <!-- Apple mobile device handling -->
  <meta name="viewport" content="user-scalable=no, width=device-width">

  <!-- Common dependencies -->
  <script type="text/javascript" src="public/common/js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="public/common/js/jquery-ui-1.8.2.custom.min.js"></script>
  <script type="text/javascript" src="public/common/js/socket.io.js"></script>
  <!-- Squeenote core -->
  <script type="text/javascript" src="public/common/js/squeenote.device.js"></script>
  <script type="text/javascript" src="public/common/js/squeenote.presentation.js"></script>
  <script type="text/javascript" src="public/common/js/squeenote.ui.js"></script>
  <link rel="stylesheet" href="public/common/css/controls.css" type="text/css" media="screen" title="no title" charset="utf-8">  
  <!-- Boot Squeenote -->
  <script type="text/javascript">
    $(document).ready(function() {
      squeenote.Device = new squeenote.Device();
      squeenote.Presentation = new squeenote.Presentation();
    })
    $(document).bind("presentationLoaded.squeenote", function(event, presentation) {
      squeenote.UI = new squeenote.UI(presentation);
    });
  </script>

  <!-- Theme files -->
  <script type="text/javascript" src="public/squeenote-default/theme.js"></script>
  <link rel="stylesheet" href="public/squeenote-default/theme.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="public/giant-fighting-robots/theme.css" type="text/css" media="screen" />
  <link media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" 
        href="public/squeenote-default/theme.ext.ipad.css" type="text/css" rel="stylesheet">
  <link media="only screen and (max-device-width: 480px)"
        href="public/squeenote-default/theme.ext.iphone.css" type="text/css" rel="stylesheet" />

  
</head>
<body>
  <ol>
    <li>
      <h1>Unit testing with Javascript and QUnit</h1>
      <h3>Or: GIANT FIGHTING ROBOTS</h3>
      <p><a href="http://github.com/danski/squeenote-qunit">Download at http://github.com/danski/squeenote-qunit</a></p>
      <p>Background image courtesy <a href="http://www.flickr.com/photos/ariels_photos/4097787955/">http://www.flickr.com/photos/ariels_photos/4097787955/</a></p>
    </li>

  <li class="impact">
    <h2>Automated testing == <em>GIANT FIGHTING ROBOTS</em>.</h2>
  </li>
  
  <li class="impact">
    <h2>QUnit == <em>Unit testing</em>.</h2>
  </li>  
  
  <li class="impact">
    <h2>The benefits of testing are threefold.</h2>
  </li>
    
  <li class="impact">
    <h2>Firstly, the very act of writing tests forces you to <em>formalise</em> and <em>rationalise</em> your design decisions ahead of time.</h2>
  </li>
  
  <li class="handson">
    <h2>Writing your first QUnit test</h2>
    
    <ul>
      <li><a href="public/test/template.test.html">The QUnit template</a></li>
    </ul>
    
    <code><pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;QUnit Test Suite&lt;/title&gt;
	&lt;link rel=&quot;stylesheet&quot; href=&quot;qunit.css&quot; type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
	&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.4.2.min.js&quot;&gt;&lt;/script&gt;
	&lt;script type=&quot;text/javascript&quot; src=&quot;qunit.js&quot;&gt;&lt;/script&gt;

&lt;/head&gt;
&lt;body&gt;
	&lt;h1 id=&quot;qunit-header&quot;&gt;QUnit Test Suite&lt;/h1&gt;
	&lt;h2 id=&quot;qunit-banner&quot;&gt;&lt;/h2&gt;
	&lt;div id=&quot;qunit-testrunner-toolbar&quot;&gt;&lt;/div&gt;
	&lt;h2 id=&quot;qunit-userAgent&quot;&gt;&lt;/h2&gt;
	&lt;ol id=&quot;qunit-tests&quot;&gt;&lt;/ol&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></code>
  </li>
  
  <li class="handson">
    <h2>Writing your first QUnit test</h2>
        
    <code><pre>&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function(){

      test(&quot;The name of the test&quot;, function() {
        // test content goes here
      })  

    });
&lt;/script&gt;</pre></code>
  </li>
  
  <li class="impact">
    <h2>Secondly, a set of tests form a powerful type of <em>documentation</em>.</h2>
  </li>
  
  <li class="handson">
    <h2>Assertions</h2>
    
    <ul>
      <li><a href="public/test/simple.test.html">Basic QUnit tests</a></li>
    </ul>
    
    <code><pre>&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function(){

      // A simple test that passes
      test(&quot;A passing test&quot;, function() {
        var foo = &quot;bar&quot;;
        equals(&quot;bar&quot;, foo, &quot;foo should be set to &#x27;bar&#x27;&quot;);
      })

      // A simple test that fails
      test(&quot;A failing test&quot;, function() {
        var foo = &quot;bar&quot;;
        equals(&quot;not bar&quot;, foo, &quot;foo should be set to &#x27;bar&#x27;&quot;);
      })      

    });
  &lt;/script&gt;</pre></code>
  </li>
  
  <li class="impact">
    <h2>Well-written tests are an excellent <em>design contract</em> between developers.</h2>
  </li>
  
  <li class="handson">
    <h2>QUnit assertions</h2>
    
    <ul>
      <li>ok(state), equals(actual, expected), same(actual, expected)</li>
    </ul>
    
    <code><pre>&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function(){

      test(&quot;A passing test&quot;, function() {
        var foo = &quot;bar&quot;;
        var truthiness = true;
        
        var animals_1 = [&quot;monkey&quot;, &quot;giraffe&quot;, &quot;bar&quot;];
        var animals_2 = [&quot;monkey&quot;, &quot;giraffe&quot;, &quot;bar&quot;];
        
        // This test will fail unless the variable foo equals "bar".      
        equals(&quot;bar&quot;, foo, &quot;foo should be set to &#x27;bar&#x27;&quot;);
        
        // This test will fail if truthiness is false or null
        ok(truthiness, &quot;truthiness should be truthy&quot;);
        
        // This test will fail if animals_1 and animals_2 have different contents
        same(animals_1, animals_2, &quot;the animal arrays should have identical contents&quot;)
        
      })

    });
  &lt;/script&gt;</pre></code>
  </li>
  
  <li class="impact handson">
    <h2>And finally, tests allow you to make <em>rapid changes</em> in full awareness of any breakages they cause.</h2>
  </li>
  
  <li class="handson">
    <h2>Async tests</h2>

    <ul>
      <li>asyncTest(function() { doSomething(); start(); })</li>
    </ul>

    <code><pre>&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function(){

      asyncTest(&quot;a test&quot;, function() {
        setTimeout(function(){
          ok(true, &quot;always fine&quot;);
          start();
        }, 13);
      });

    });
&lt;/script&gt;</pre></code>
  </li>

  <li class="numpoints handson">
    <h2>The testing cycle</h2>
    
    <ol>
      <li value="10">Write test list</li>
      <li value="20">Write tests</li>
      <li value="30">Write code</li>
      <li value="40">Run tests</li>
      <li value="50">GOTO 20</li>
    </ol>
  </li>
  
  <li class="numpoints">
    <h2>The maintenance cycle</h2>
    
    <ol>
      <li value="50">Deploy new code</li>
      <li value="60">Find a bug</li>
      <li value="70">Fix the bug</li>
      <li value="80">Add more tests</li>
      <li value="90">GOTO 50</li>
    </ol>
  </li>
    
  <li class="impact">
    <h2>Better collaboration, better documentation, and your code will smell nicer. <em>What's not to like?</em></h2>
  </li>
  
  <li>
    <h2>Testing in other languages</h2>
    <ul>
      <li>Ruby: <a href="http://ruby-doc.org/core/classes/Test/Unit.html">Test::Unit</a>, <a href="http://rspec.info/">RSpec</a>, <a href="http://github.com/thoughtbot/shoulda">Shoulda</a></li>
      <li>Java: <a href="http://www.junit.org/">JUnit</a></li>
      <li>Actionscript: <a href="http://opensource.adobe.com/wiki/display/flexunit/FlexUnit;jsessionid=8AF38DE756E79FADD45E631AF4C25A31">FlexUnit</a></li>
      <li>Cocoa/Obj-C: <a href="http://developer.apple.com/tools/unittest.html">OCUnit</a></li>
      <li>And billions more besides. When it comes to frameworks, an old saying applies. &quot;There's one born every minute.&quot;</li>
    </ul>
  </li>
    
  <!-- Further reading -->

  <li>
    <h2>You will ask questions now.</h2>
    <img class="middle" src="http://gaia.sunn.de/tmp/hypnotoad.gif">
  </li>
  </ol>
</body>
</html>